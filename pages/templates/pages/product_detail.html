{% extends 'pages/base.html' %} {% load static %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <!-- 4-column grid: 3 for images, 1 for details -->
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
    <!-- Image Gallery: spans 3 columns -->
    <div class="lg:col-span-3">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        {% for img_obj in product_images %}
        <div
          class="bg-gray-100 h-[400px] flex items-center justify-center overflow-hidden"
        >
          <img
            src="{{ img_obj.image.url }}"
            alt="{{ product.name }} image {{ forloop.counter }}"
            class="h-full object-contain"
          />
        </div>
        {% empty %}
        <div class="bg-gray-200 h-[400px] flex items-center justify-center">
          <span class="text-gray-500">No Image Available</span>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Product Details Column -->
    <div class="lg:col-span-1">
      <!-- Breadcrumbs -->
      <div class="text-xs text-gray-500 mb-4">
        <a href="#" class="hover:text-black"
          >{{ product.category.name|default:'Category' }}</a
        >
        &gt; <span class="text-gray-700">{{ product.name }}</span>
      </div>
      <!-- Title & Price -->
      <h1 class="text-3xl font-bold mb-2">{{ product.name }}</h1>
      <div class="text-2xl font-semibold mb-4">
        ${{ product.price_in_dollars }}
      </div>
      <!-- Color Selector -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Color</label
        >
        <div class="flex space-x-2">
          {% for detail in details %}{% for color in detail.color_set.all %}
          <button
            title="{{ color.name }}"
            style="background-color: {{ color.color_code }};"
            class="w-8 h-8 rounded-full border border-gray-300 focus:ring-2 focus:ring-offset-1 focus:ring-black"
          ></button>
          {% endfor %}{% endfor %}
        </div>
      </div>
      <!-- Size Selector -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">Size</label>
        <div class="grid grid-cols-4 gap-2">
          {% for detail in details %}{% for size in detail.size_set.all %}
          <button
            class="text-sm border border-gray-300 rounded py-2 px-1 hover:border-black focus:ring-1 focus:ring-black"
          >
            {{ size.name }}
          </button>
          {% endfor %}{% endfor %}
        </div>
      </div>
      <!-- Add to Cart & Wishlist -->
      <button
        class="w-full bg-red-600 text-white py-3 rounded-md font-medium hover:bg-red-700 mb-4"
      >
        Add to Bag
      </button>
      <button
        class="w-full border border-gray-300 py-3 rounded-md font-medium hover:bg-gray-100 flex items-center justify-center space-x-2 mb-8"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="w-5 h-5 text-gray-700"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="1.5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"
          />
        </svg>
        <span>Favorite</span>
      </button>
      <!-- Collapsible Info Sections -->
      <div class="space-y-4">
        <div class="border-t pt-4">
          <h2 class="text-sm font-medium">Product Details</h2>
          <p class="text-sm text-gray-600 mt-2">
            {{ product.description|default:'No description.' }}
          </p>
        </div>
        <div class="border-t pt-4">
          <h2 class="text-sm font-medium">Specs & Care</h2>
          <ul class="text-sm text-gray-600 mt-2 space-y-1">
            <li>
              <strong>Style #:</strong> {{ product.style_code|default:'N/A' }}
            </li>
            <li>
              <strong>Material:</strong> {{ product.material|default:'N/A' }}
            </li>
            <li><strong>Imported</strong></li>
          </ul>
        </div>
        <div class="border-t pt-4">
          <h2 class="text-sm font-medium">Reviews</h2>
          <p class="text-sm text-gray-600 mt-2">No reviews yet.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Collapsible sections script (if still needed) -->
<script>
  // (Optional) interactive expand/collapse code
</script>

{% endblock %}
